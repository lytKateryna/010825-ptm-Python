## Наследование, Композиция, Агрегация

В ООП есть несколько способов связывать объекты между собой: 
* **наследование**, 
* **композиция**
* и **агрегация**.

---

### 1. Наследование (Inheritance)

Наследование используется, когда один класс **расширяет или модифицирует поведение другого класса**.  
Оно описывает отношение `is-a` (объект `Dog` является расширенной версией объекта `Animal`):

* `Dog` наследует свойства `Animal`
* `Dog` наследует поведение `Animal`
* `Dog` может дополнять или изменять это поведение
* `Dog` всё ещё считается `Animal`, но более конкретным


#### Пример:

```python
class Animal:
    def __init__(self, name):
        self.name = name

    def speak(self):
        return "Some sound"

# Наследуемся от Animal
class Dog(Animal):
    def speak(self):
        return "Woof!"

dog = Dog("Buddy")
print(dog.name)   # Buddy
print(dog.speak())  # Woof!
```

* `Dog` **является** `Animal` → отношение `is-a`.
* Подкласс наследует методы и атрибуты родителя, но может их переопределять.

---

## 2. Композиция (Composition)

Композиция описывает отношение "**состоит из**" (`has-a`) и подразумевает,  
что один объект **содержит другой как часть себя**.  
При этом компонент обычно создаётся внутри объекта и полностью принадлежит ему:

* `Car` **содержит в себе** объект `Engine`
* `Car` **использует** `Engine` для реализации части своего поведения (например, `start()`)
* `Engine` **создаётся внутри** `Car` и **не существует отдельно** от него
* `Engine` **не является** видом `Car`, но является **частью** `Car`
* Жизненный цикл `Engine` **полностью зависит от** `Car`: 
  * когда `Car` уничтожается, `Engine` тоже исчезает
* Отношение `Car`–`Engine` — это **целое–часть**

### Пример:

```python
class Engine:
    def start(self):
        return "Engine started"

class Car:
    def __init__(self):
        self.engine = Engine()  # Car **содержит** Engine

    def start(self):
        return self.engine.start()

car = Car()
print(car.start())  # Engine started
```

* `Car` состоит из `Engine` → отношение `has-a`.
* `Engine` полностью принадлежит `Car` (Car создаёт и управляет жизненным циклом Engine).

---

## 3. Агрегация (Aggregation)

Агрегация тоже описывает отношение `has-a`, но 
* компонент **существует отдельно** 
* и **может использоваться несколькими объектами**. 
* Обычно компонент передаётся непосредственно в конструктор.


Таким образом связь `Employee` → `Department` предполагает, что:

* `Employee` **имеет ссылку на** объект `Department`
* `Employee` **использует** `Department`, но **не владеет** им
* `Department` **существует самостоятельно**, независимо от `Employee`
* Один и тот же `Department` может использоваться **несколькими** `Employee`
* Жизненный цикл `Department` **не зависит** от жизненного цикла `Employee`
* Отношение `Employee`–`Department` — это **`has-a` (агрегация)**, 
  * но **не композиция** и **не is-a**


### Пример:

```python
class Department:
    def __init__(self, name):
        self.name = name

class Employee:
    def __init__(self, name, department):
        self.name = name
        self.department = department  # Employee **имеет** Department, но не создаёт его

dept = Department("HR")
emp = Employee("Alice", dept)

print(emp.department.name)  # HR
```

* `Employee` имеет `Department`, но не управляет его жизненным циклом.
* `Department` может использоваться несколькими `Employee`.

---


### Схема трёх вариантов отношения объектов:

```
        НАСЛЕДОВАНИЕ               КОМПОЗИЦИЯ                            АГРЕГАЦИЯ 
          (is-a)               (has-a, часть целого)            (has-a, независимый компонент)
             ^          
             |
     +----------------+         +-----------------+         +-----------------+       +--------------+
     |      Dog       |         |       Car       |         |                 |       |              |
     +----------------+         |  +-----------+  |         |    Employee     |-------|  Department  |
             |                  |  |           |  |         |                 |       |              |
             v                  |  |  Engine   |  |         +-----------------+       +--------------+
     +----------------+         |  |           |  |         
     |     Animal     |         |  +-----------+  |
     +----------------+         +-----------------+ 

```

---

## Резюме

| Связь        | Отношение | Жизненный цикл компонента | Пример                |
| ------------ | --------- | ------------------------- | --------------------- |
| Наследование | is-a      | Родитель управляет        | Dog → Animal          |
| Композиция   | has-a     | Целое создаёт компонент   | Car → Engine          |
| Агрегация    | has-a     | Компонент независим       | Employee → Department |


